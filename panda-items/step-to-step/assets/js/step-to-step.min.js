!function(a){"use strict";var b=a.pandalocker.tools.extend(a.pandalocker.entity.group);b._defaults={order:["screen-message"],text:a.pandalocker.lang.subscription.defaultText},b.name="custom-screens",a.pandalocker.groups["custom-screens"]=b}(jQuery);
!function(a){"use strict";a.pandalocker.controls["custom-screens"]||(a.pandalocker.controls["custom-screens"]={});var b=a.pandalocker.tools.extend(a.pandalocker.entity.actionControl);b.name="screen-message",b.defaults={},b.prepareOptions=function(){this.options=a.extend(!0,this.defaults,this.options,this.locker.options.customScreens)},b.render=function(b){var c=this,d=a('<a href="#" class="onp-sl-button onp-sl-button-primary">Закрыть окно</a>');d.click(function(){return c.unlock("screen-message"),!1}),b.append(d)},a.pandalocker.controls["custom-screens"]["screen-message"]=b}(jQuery);
!function(a){"use strict";function b(b,c){var d="",e=a('<div class="onp-sts-progress-line"></div>');return c.stepToStep&&c.stepToStep["step"+b]&&(d=c.stepToStep["step"+b].title||""),e.append('<div class="onp-sts-step-mark onp-sts-step-'+b+'-mark"><span>ШАГ #'+b+"</span>"+d+"</div>"),e}a.pandalocker.step_to_step||(a.pandalocker.step_to_step={},a.pandalocker.step_to_step.needed=0,a.pandalocker.step_to_step.finish=0),a.pandalocker.hooks.add("opanda-filter-options",function(a,b){return b.options.stepToStep?(a.demo=!0,a):a}),a.pandalocker.hooks.add("opanda-filter-init-group-index",function(a,b,c){return b.options.stepToStep?0:a}),a.pandalocker.hooks.add("opanda-filter-init-group-options",function(b,c,d,e){if(!c.options.stepToStep)return b;d+=1;var f,g=a.pandalocker.tools.camelCase(e.name),h=c.options.stepToStep["step"+d];return h&&h.lockerOptions&&(f=a.extend({},h.lockerOptions),f[g]&&delete f[g],h.lockerOptions[g]&&(f=a.extend(f,h.lockerOptions[g])),b=a.extend(b,f)),b}),a.pandalocker.hooks.add("opanda-markup-created",function(b,c,d){if(c.options.stepToStep){c.screens["default"].remove();for(var e in c._screenFactory)if(c._screenFactory.hasOwnProperty(e)&&!(e.indexOf("step")<0)){if(!c._screenFactory[e]&&!c.screens[e])throw new a.pandalocker.error('The screen "'+e+'" not found in the group "'+e+'"');var f=a("<div class='onp-sl-screen onp-sl-screen-"+e+"'></div>").appendTo(c.innerWrap).hide();c.screens[e]=c._screenFactory[e](f)}var g=2;c.locker.click(function(a){a.stopPropagation(),c.screens["default"]=c.defaultScreen=c.screens["step-"+g],c._showScreen("step-"+g),c.locker.find(".onp-sts-step-"+(g-1)+"-mark").addClass("onp-sts-finish"),c.runHook("next-step",["step-"+g],!0),g++})}}),a.pandalocker.hooks.add("opanda-before-render-group-filter",function(a,b,c,d,e,f){return b.options.stepToStep?(c+=1,b.screens["default"]=b.defaultScreen=f["step-1"],b._currentScreenName="default",f["step-1"].show(),f["step-"+c]):a}),a.pandalocker.hooks.add("opanda-after-render-group",function(a,c,d,e){if(c.options.stepToStep){var f,g=c.options.groups&&c.options.groups.order;d+=1;for(var h=0;h<g.length;h++)f=b(h+1,c.options),d>=h+1?e.element.before(f):c.screens["step-"+d]&&c.screens["step-"+d].append(f)}}),a.pandalocker.hooks.add("opanda-init",function(b,c,d){if(c.options.stepToStep){if(c.options.groups&&c.options.groups.order){a.pandalocker.step_to_step.needed=c.options.groups.order.length;for(var e=0;e<c.options.groups.order.length;e++)c._registerScreen("step-"+(e+1),function(a,b){return a})}var f=c._unlock;c._unlock=function(b,d,e){a.pandalocker.step_to_step.finish++;var g=a.pandalocker.step_to_step.finish,h=g+1,i=h-1;return g>=a.pandalocker.step_to_step.needed?(f.apply(c,[b,d,e]),!1):c.screens["step-"+h]?(c.screens["default"]=c.defaultScreen=c.screens["step-"+h],c._showScreen("step-"+h),c.locker.find(".onp-sts-step-"+i+"-mark").addClass("onp-sts-finish"),c.runHook("next-step",["step-"+h],!0),!1):void console.log("screen step-"+h+" не существует")}}})}(jQuery);